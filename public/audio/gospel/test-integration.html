<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test IntÃ©gration Audio-Gospel - Faith Chronicles</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 30px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .test-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        button {
            background: #4CAF50;
            color: white;
            padding: 12px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        button.secondary {
            background: #2196F3;
        }
        button.secondary:hover {
            background: #1976D2;
        }
        button.danger {
            background: #f44336;
        }
        button.danger:hover {
            background: #d32f2f;
        }
        .status {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            font-size: 13px;
        }
        .live-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.15);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #f44336;
        }
        .indicator.active {
            background: #4CAF50;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <h1>ğŸµ Test IntÃ©gration Audio-Gospel</h1>
    <h2>Faith Chronicles - Panneau Audio UnifiÃ©</h2>
    
    <div class="test-section">
        <h3>ğŸ›ï¸ Simulation Panneau Audio MenuScreen</h3>
        <p>Ce test simule l'intÃ©gration des contrÃ´les gospel dans le panneau audio existant du MenuScreen.</p>
        
        <!-- Statut en temps rÃ©el -->
        <div class="live-status">
            <span>ğŸµ Status Gospel:</span>
            <div id="gospel-indicator" class="indicator"></div>
            <span id="gospel-status-text">ArrÃªtÃ©</span>
        </div>
        
        <div class="live-status">
            <span>ğŸ“± Player Gospel:</span>
            <span id="player-status">Non initialisÃ©</span>
        </div>
        
        <div class="live-status">
            <span>ğŸ¶ Chanson actuelle:</span>
            <span id="current-song">Aucune</span>
        </div>
    </div>

    <div class="test-section">
        <h3>ğŸ® ContrÃ´les Gospel (Style MenuScreen)</h3>
        
        <div class="controls">
            <button onclick="testGospelStart()" class="secondary">
                â–¶ï¸ GOSPEL
            </button>
            <button onclick="testGospelToggle()">
                â¸ï¸ PAUSE/PLAY
            </button>
            <button onclick="testGospelStop()" class="danger">
                â¹ï¸ STOP
            </button>
        </div>
        
        <div style="text-align: center; margin: 15px 0;">
            <span style="font-size: 12px; opacity: 0.8;">ğŸµ Chanson <span id="song-counter">0</span>/24</span>
        </div>
    </div>

    <div class="test-section">
        <h3>ğŸ”§ Tests Techniques</h3>
        
        <div class="controls">
            <button onclick="checkGlobalObjects()">
                ğŸ” VÃ©rifier Objets Globaux
            </button>
            <button onclick="testAudioEffects()">
                ğŸµ Test Effets Audio
            </button>
            <button onclick="simulateMenuScreenPanel()">
                ğŸ“± Simuler Panneau MenuScreen
            </button>
        </div>
    </div>

    <div class="status" id="log">
        ğŸ“‹ Log des tests - PrÃªt...
    </div>

    <!-- Scripts -->
    <script src="faith-gospel-player.js"></script>
    <script src="../faithful-sounds-generator.js"></script>

    <script>
        let logElement = document.getElementById('log');
        let updateInterval;

        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent = `[${timestamp}] ${message}`;
            console.log(`ğŸµ Test: ${message}`);
        }

        function updateLiveStatus() {
            const indicator = document.getElementById('gospel-indicator');
            const statusText = document.getElementById('gospel-status-text');
            const playerStatus = document.getElementById('player-status');
            const currentSong = document.getElementById('current-song');
            const songCounter = document.getElementById('song-counter');

            if (window.faithGospelPlayer) {
                const player = window.faithGospelPlayer;
                
                // Indicateur visuel
                if (player.isPlaying) {
                    indicator.classList.add('active');
                    statusText.textContent = 'En cours';
                } else {
                    indicator.classList.remove('active');
                    statusText.textContent = player.userStarted ? 'En pause' : 'ArrÃªtÃ©';
                }
                
                // Status du player
                playerStatus.textContent = player.userStarted ? 'Actif' : 'En attente';
                
                // Chanson actuelle
                if (player.userStarted) {
                    const songNames = [
                        'AimÃ©(e) Tel(le) Que Tu Es',
                        'Amour Divin',
                        'AquÃ©la ambÃ©dÃ© hahÃ¡',
                        'Avec sa Paix',
                        'Avec toi, je tiens bon',
                        'Blessed are you, O God eternal',
                        'Des Maux dans mon viseur (remix)',
                        'Ã‰coute, crois et vis',
                        'Elle m\'a dit, Il est vivant',
                        'Fais un pas en avant',
                        'Fais un pas en avant... grÃ¢ce',
                        'Flame Inside rmx life',
                        'GuÃ©rit mon cÅ“ur',
                        'HÃ© hohoho, entends-tu la vÃ©ritÃ©',
                        'Il calme mon Ã¢me',
                        'Il demeure en majestÃ©',
                        'Il y a un espoir',
                        'I\'ve counted my stars',
                        'Je lÃ¨ve les mains vers les lieux saints',
                        'Je n\'ai point honte de l\'Ã‰vangile',
                        'Je porte une paix qui brille',
                        'Je proclame sur ma vie',
                        'J\'ai besoin de toi',
                        'J\'ai poursuivi la Paix'
                    ];
                    currentSong.textContent = songNames[player.currentIndex] || 'Inconnue';
                    songCounter.textContent = (player.currentIndex + 1).toString();
                } else {
                    currentSong.textContent = 'Aucune';
                    songCounter.textContent = '0';
                }
            } else {
                indicator.classList.remove('active');
                statusText.textContent = 'Non disponible';
                playerStatus.textContent = 'Non initialisÃ©';
                currentSong.textContent = 'N/A';
                songCounter.textContent = '0';
            }
        }

        function testGospelStart() {
            if (window.faithAudio) {
                window.faithAudio.start();
                addLog('DÃ©marrage Gospel demandÃ©');
            } else {
                addLog('ERREUR: faithAudio non disponible');
            }
        }

        function testGospelToggle() {
            if (window.faithAudio) {
                window.faithAudio.toggle();
                addLog('Toggle Gospel executÃ©');
            } else {
                addLog('ERREUR: faithAudio non disponible');
            }
        }

        function testGospelStop() {
            if (window.faithAudio) {
                window.faithAudio.stop();
                addLog('ArrÃªt Gospel demandÃ©');
            } else {
                addLog('ERREUR: faithAudio non disponible');
            }
        }

        function checkGlobalObjects() {
            const results = {
                'window.faithAudio': !!window.faithAudio,
                'window.faithGospelPlayer': !!window.faithGospelPlayer,
                'window.faithSounds': !!window.faithSounds
            };
            
            let report = 'Objets globaux: ';
            for (const [key, value] of Object.entries(results)) {
                report += `${key}=${value ? 'âœ…' : 'âŒ'} `;
            }
            
            addLog(report);
        }

        function testAudioEffects() {
            if (window.faithSounds) {
                window.faithSounds.starEarned();
                addLog('Test effet audio (Ã©toile) jouÃ©');
            } else {
                addLog('ERREUR: faithSounds non disponible');
            }
        }

        function simulateMenuScreenPanel() {
            addLog('Simulation du panneau MenuScreen avec Gospel intÃ©grÃ©...');
            
            setTimeout(() => {
                if (window.faithGospelPlayer) {
                    const status = window.faithGospelPlayer.isPlaying ? 'EN COURS' : 'ARRÃŠTÃ‰';
                    const song = (window.faithGospelPlayer.currentIndex || 0) + 1;
                    addLog(`Panneau MenuScreen: Status=${status}, Chanson=${song}/6`);
                } else {
                    addLog('Panneau MenuScreen: Gospel player non initialisÃ©');
                }
            }, 500);
        }

        // Initialisation
        window.addEventListener('load', () => {
            addLog('Page de test chargÃ©e - VÃ©rification des composants...');
            
            setTimeout(() => {
                checkGlobalObjects();
                updateLiveStatus();
                
                // DÃ©marrer la mise Ã  jour en temps rÃ©el
                updateInterval = setInterval(updateLiveStatus, 1000);
            }, 1000);
        });

        // Nettoyage
        window.addEventListener('beforeunload', () => {
            if (updateInterval) {
                clearInterval(updateInterval);
            }
        });
    </script>
</body>
</html>